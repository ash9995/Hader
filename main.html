<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="نظام إدارة الحضور الذكي للمتطوعين والمتدربين">
    <title>حــاضـر| Hader </title>
    
    <!-- External Stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="website icon" href="img/websiteicon.ico">
    
    <!-- Custom Stylesheets -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Background Overlay -->
    <div class="background-overlay"></div>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Welcome Screen -->
        <div class="welcome-screen">
            <!-- Logo Section -->
            <div class="logo-container">
                <img src="img/Logo.jpg" alt="Smart Attendance Logo" class="logo-image">
                <h1 id="welcome-title">حــاضـر</h1>
                <p class="welcome-subtitle">نظام متقدم لإدارة الحضور والانصراف</p>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="showForm('checkin')">
                    <i class="fas fa-sign-in-alt"></i> تسجيل حضور
                </button>
                <button class="btn btn-secondary" onclick="showForm('checkout')">
                    <i class="fas fa-sign-out-alt"></i> تسجيل خروج
                </button>
                <button class="btn btn-admin" onclick="showAdmin()">
                    <i class="fas fa-chart-bar"></i> لوحة التحكم
                </button>
            </div>
        </div>
    </div>

    <!-- Check-in Form Overlay -->
    <div class="form-overlay" id="checkin-overlay">
        <div class="form-container">
            <!-- Close Button -->
            <button class="form-close" onclick="hideForm('checkin')">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Form Header -->
            <h2 class="form-title">تسجيل حضور</h2>
            <div class="avatar-container">
                <div class="avatar">
                    <i class="fas fa-user-plus"></i>
                </div>
            </div>
            
            <!-- Check-in Form -->جميع الحقوق محفوظة© 2025|حــاضــر
            <form id="checkin-form">
                <!-- User Type Selection -->
                <div class="form-group">
                    <label for="user-type">النوع</label>
                    <select id="user-type" required>
                        <option value="" disabled selected>اختر النوع</option>
                        <option value="متطوع">متطوع</option>
                        <option value="متدرب">متدرب</option>
                        <option value="تمهير">تمهير</option>
                    </select>
                </div>
                
                <!-- Name Field with Auto-complete -->
                <div class="form-group">
                    <label for="checkin-name">الاسم الكامل</label>
                    <input type="text" id="checkin-name" required placeholder="الاسم الثلاثي" list="name-suggestions">
                    <datalist id="name-suggestions"></datalist>
                </div>
                
                <!-- Phone Field with Auto-complete -->
                <div class="form-group">
                    <label for="checkin-phone">رقم الجوال</label>
                    <input type="tel" id="checkin-phone" required placeholder="05XXXXXXXX" list="phone-suggestions">
                    <datalist id="phone-suggestions"></datalist>
                </div>
                
                <!-- Opportunity Type (Only for Volunteers) -->
                <div class="form-group" id="opportunity-type-container" style="display: none;">
                    <label for="opportunity-type">نوع الفرصة التطوعية</label>
                    <input type="text" id="opportunity-type" placeholder="نوع الفرصة">
                </div>
                
                <!-- Submit Button -->
                <button type="submit" class="btn btn-submit">
                    <i class="fas fa-check-circle"></i> تأكيد الحضور
                </button>
            </form>
        </div>
    </div>

    <!-- Check-out Form Overlay -->
    <div class="form-overlay" id="checkout-overlay">
        <div class="form-container">
            <!-- Close Button -->
            <button class="form-close" onclick="hideForm('checkout')">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Form Header -->
            <h2 class="form-title">تسجيل خروج</h2>
            <div class="avatar-container">
                <div class="avatar">
                    <i class="fas fa-user-clock"></i>
                </div>
            </div>
            
            <!-- Check-out Form -->
            <form id="checkout-form">
                <div class="form-group">
                    <label for="checkout-phone">رقم الجوال</label>
                    <input type="tel" id="checkout-phone" required placeholder="05XXXXXXXX" list="checkout-phone-suggestions">
                    <datalist id="checkout-phone-suggestions"></datalist>
                </div>
                
                <button type="submit" class="btn btn-submit">
                    <i class="fas fa-sign-out-alt"></i> تأكيد الخروج
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Panel Overlay -->
    <div class="admin-overlay" id="admin-overlay">
        <div class="admin-container">
            <!-- Admin Header -->
            <div class="admin-header">
                <h2 class="admin-title">لوحة التحكم</h2>
                <button class="admin-close" onclick="hideAdmin()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- KPI Cards Section -->
            <div class="kpi-container">
                <!-- Volunteers KPI -->
                <div class="kpi-card volunteers">
                    <div class="kpi-icon volunteers">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <div class="kpi-info">
                        <h3 id="volunteers-count">0</h3>
                        <p>المتطوعين</p>
                        <span class="kpi-detail" id="volunteers-avg">متوسط: 0 ساعة</span>
                    </div>
                </div>
                
                <!-- Trainees KPI -->
                <div class="kpi-card trainees">
                    <div class="kpi-icon trainees">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="kpi-info">
                        <h3 id="trainees-count">0</h3>
                        <p>المتدربين</p>
                        <span class="kpi-detail" id="trainees-days">متوسط الأيام: 0</span>
                    </div>
                </div>
                
                <!-- Preparatory KPI -->
                <div class="kpi-card preparatory">
                    <div class="kpi-icon preparatory">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <div class="kpi-info">
                        <h3 id="preparatory-count">0</h3>
                        <p>التمهير</p>
                        <span class="kpi-detail" id="preparatory-days">متوسط الأيام: 0</span>
                    </div>
                </div>
                
                <!-- Total Attendance KPI -->
                <div class="kpi-card total">
                    <div class="kpi-icon total">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="kpi-info">
                        <h3 id="total-count">0</h3>
                        <p>إجمالي الحضور</p>
                        <span class="kpi-detail" id="total-hours">إجمالي الساعات: 0</span>
                    </div>
                </div>
            </div>

            <!-- Detailed Category KPIs -->
            <div id="category-kpis" class="category-kpis-container">
                <h3 class="section-title">التحليل التفصيلي حسب الفئات</h3>
                <div class="category-charts-grid">
                    <!-- Volunteers Chart -->
                    <div class="category-chart-card volunteers">
                        <div class="chart-header">
                            <h4><i class="fas fa-hands-helping"></i> المتطوعين</h4>
                        </div>
                        <div class="chart-content">
                            <div class="chart-stats">
                                <div class="chart-stat">
                                    <span class="stat-number" id="volunteers-sessions">0</span>
                                    <span class="stat-label">جلسات</span>
                                </div>
                                <div class="chart-stat">
                                    <span class="stat-number" id="volunteers-hours">0</span>
                                    <span class="stat-label">ساعات</span>
                                </div>
                                <div class="chart-stat">
                                    <span class="stat-number" id="volunteers-avg-session">0</span>
                                    <span class="stat-label">متوسط الجلسة</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Trainees Chart -->
                    <div class="category-chart-card trainees">
                        <div class="chart-header">
                            <h4><i class="fas fa-graduation-cap"></i> المتدربين</h4>
                        </div>
                        <div class="chart-content">
                            <div class="chart-stats">
                                <div class="chart-stat">
                                    <span class="stat-number" id="trainees-sessions">0</span>
                                    <span class="stat-label">جلسات</span>
                                </div>
                                <div class="chart-stat">
                                    <span class="stat-number" id="trainees-total-days">0</span>
                                    <span class="stat-label">الأيام</span>
                                </div>
                                <div class="chart-stat">
                                    <span class="stat-number" id="trainees-completion">0%</span>
                                    <span class="stat-label">نسبة الإنجاز</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Preparatory Chart -->
                    <div class="category-chart-card preparatory">
                        <div class="chart-header">
                            <h4><i class="fas fa-user-graduate"></i> التمهير</h4>
                        </div>
                        <div class="chart-content">
                            <div class="chart-stats">
                                <div class="chart-stat">
                                    <span class="stat-number" id="preparatory-sessions">0</span>
                                    <span class="stat-label">جلسات</span>
                                </div>
                                <div class="chart-stat">
                                    <span class="stat-number" id="preparatory-total-days">0</span>
                                    <span class="stat-label">الأيام</span>
                                </div>
                                <div class="chart-stat">
                                    <span class="stat-number" id="preparatory-completion">0%</span>
                                    <span class="stat-label">نسبة الإنجاز</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controls Section -->
            <div class="controls-section">
                <div class="controls-grid">
                    <!-- City Filter -->
                    <div class="control-group">
                        <label for="city-filter">الفرع</label>
                        <select id="city-filter">
                            <option value="all">جميع الفروع</option>
                        </select>
                    </div>
                    
                    <!-- Period Filter -->
                    <div class="control-group">
                        <label for="period-filter">الفترة الزمنية</label>
                        <select id="period-filter">
                            <option value="today">اليوم</option>
                            <option value="this-week">هذا الأسبوع</option>
                            <option value="this-month">هذا الشهر</option>
                            <option value="last-month">الشهر الماضي</option>
                            <option value="last-3-months">آخر 3 أشهر</option>
                            <option value="last-6-months">آخر 6 أشهر</option>
                            <option value="custom">فترة مخصصة</option>
                        </select>
                    </div>
                    
                    <!-- Export Category Filter -->
                    <div class="control-group">
                        <label for="category-filter">فئة التصدير</label>
                        <select id="category-filter">
                            <option value="all">جميع الفئات</option>
                            <option value="متطوع">المتطوعين</option>
                            <option value="متدرب">المتدربين</option>
                            <option value="تمهير">التمهير</option>
                        </select>
                    </div>
                    
                    <!-- Custom Date Range -->
                    <div class="control-group" id="custom-date-range" style="display: none;">
                        <label for="date-from">من تاريخ</label>
                        <input type="date" id="date-from">
                        <label for="date-to" style="margin-top: 10px;">إلى تاريخ</label>
                        <input type="date" id="date-to">
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="actions-grid">
                    <button class="btn btn-export" onclick="exportToExcel()">
                        <i class="fas fa-file-excel"></i> تصدير البيانات Excel
                    </button>
                    <button class="btn btn-export" onclick="exportToPDF()">
                        <i class="fas fa-file-pdf"></i> تصدير البيانات PDF
                    </button>
                    <button class="btn btn-export" onclick="exportKPIToExcel()">
                        <i class="fas fa-chart-bar"></i> تصدير التحليلات Excel
                    </button>
                    <button class="btn btn-export" onclick="exportKPIToPDF()">
                        <i class="fas fa-chart-line"></i> تصدير التحليلات PDF
                    </button>
                </div>
            </div>

            <!-- Table Section -->
            <div class="table-section">
                <div class="table-header">
                    <h3>سجلات الحضور والانصراف</h3>
                </div>
                <div class="table-container">
                    <table id="attendance-table">
                        <thead>
                            <tr>
                                <th>الفرع</th>
                                <th>الاسم</th>
                                <th>رقم الجوال</th>
                                <th>النوع</th>
                                <th>وقت الدخول</th>
                                <th>وقت الخروج</th>
                                <th>المدة</th>
                                <th>عدد الأيام</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Notification -->
    <div class="alert" id="alert-message"></div>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p class="copyright">جميع الحقوق محفوظة© <span id="current-year"></span>  |   حــــاضــر  </p>
            <p class="developer">تطوير: <span>عائشة راشد الشمري | يوسف الأحمر </span></p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>